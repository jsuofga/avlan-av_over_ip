import{_ as E,c as w,b as a,w as s,r as i,u as C,o as p,f as u,d as c,g as S,a as k,t as g,F as V,e as Z}from"./index-B3QKIqvU.js";const U={name:"NameZones",props:[],setup(){return{stateStore:C()}},data(){return{zoneName:"",zoneNameError:""}},methods:{add(){this.zoneNameError="";const n=this.zoneName.trim();if(!n){this.zoneNameError="Zone name cannot be empty.";return}if(this.stateStore.zoneNames.map(e=>e.toLowerCase()).includes(n.toLowerCase())){this.zoneNameError=`A zone named "${n}" already exists.`;return}this.stateStore.zoneNames.length<8?(this.stateStore.zoneNames.push(n),this.zoneName=""):(this.zoneNameError="Max allowed zones is 8",this.zoneName="")},trash(n){this.stateStore.zoneNames.splice(n,1)},async save(n){n.preventDefault();const e=location.hostname;let h=[];try{const o=await(await fetch(`http://${e}:3000/read/UserZoneNames`,{method:"GET"})).json();o&&(h=Object.values(o))}catch(t){console.error("Error loading previous zone names:",t)}let l=[];try{l=await(await fetch(`http://${e}:3000/read/UserTvNames`,{method:"GET"})).json()}catch(t){console.error("Error loading TV data:",t)}if(Array.isArray(l)&&l.length>0){let t=!1;l=l.map(o=>{if(o.zone!=="Disabled"){const r=h.indexOf(o.zone);if(r!==-1&&this.stateStore.zoneNames[r]&&o.zone!==this.stateStore.zoneNames[r])return t=!0,{...o,zone:this.stateStore.zoneNames[r],zoneId:r+1};if(r===-1||!this.stateStore.zoneNames[r])return t=!0,{...o,zone:"Disabled",zoneId:0}}return o}),t&&await fetch(`http://${e}:3000/write/UserTvNames/${JSON.stringify(l)}`)}let d={};this.stateStore.zoneNames.forEach((t,o)=>{d[`zone${o+1}`]=t}),fetch(`http://${e}:3000/write/UserZoneNames/${JSON.stringify(d)}`).then(()=>{this.$router.push({name:"home"})}).catch(t=>console.log(t))},cancel(n){n.preventDefault(),this.$router.push({name:"home"})}}},D={class:"name-zones"},T={class:"input-section"},I={class:"zones-grid mt-4"},$={class:"trash-container"},j={class:"zone-header"},A={class:"zone-label"},B={class:"d-flex align-center"};function G(n,e,h,l,d,t){const o=i("v-card-title"),r=i("v-btn"),f=i("v-text-field"),x=i("v-alert"),z=i("v-card-text"),N=i("v-card"),v=i("v-icon"),b=i("v-card-actions");return p(),w("div",D,[a(N,{class:"mx-auto pa-6",width:"100%",color:"white"},{default:s(()=>[a(o,{class:"text-h5 text-center"},{default:s(()=>[...e[2]||(e[2]=[u("Create Zones",-1)])]),_:1}),a(z,null,{default:s(()=>[c("div",T,[a(f,{modelValue:d.zoneName,"onUpdate:modelValue":e[1]||(e[1]=_=>d.zoneName=_),label:"Enter Name of Zone/Group",placeholder:"Enter Name of Zone/Group",maxlength:"10",variant:"outlined",density:"comfortable",style:{width:"50%"}},{"append-inner":s(()=>[a(r,{color:"blue",onClick:e[0]||(e[0]=_=>t.add()),size:"small","prepend-icon":"mdi-plus"},{default:s(()=>[...e[3]||(e[3]=[u(" Add Zone ",-1)])]),_:1})]),_:1},8,["modelValue"])]),d.zoneNameError?(p(),S(x,{key:0,type:"error",density:"compact",class:"mt-2"},{default:s(()=>[u(g(d.zoneNameError),1)]),_:1})):k("",!0),c("div",I,[(p(!0),w(V,null,Z(l.stateStore.zoneNames,(_,m)=>(p(),S(N,{key:m,class:"zone-item",variant:"outlined",color:"white"},{default:s(()=>[a(z,{class:"pa-2"},{default:s(()=>[c("div",$,[a(r,{icon:"mdi-delete",size:"x-small",color:"red",variant:"text",onClick:y=>t.trash(m)},null,8,["onClick"])]),c("div",j,[c("span",A,"Zone "+g(m+1),1)]),c("div",B,[a(f,{modelValue:l.stateStore.zoneNames[m],"onUpdate:modelValue":y=>l.stateStore.zoneNames[m]=y,density:"compact",variant:"outlined","hide-details":"",maxlength:"10",class:"zone-input",color:"black","base-color":"grey"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}),a(b,{class:"justify-center"},{default:s(()=>[a(r,{color:"red",onClick:t.cancel,size:"large",variant:"flat"},{default:s(()=>[a(v,{start:"",color:"white"},{default:s(()=>[...e[4]||(e[4]=[u("mdi-cancel",-1)])]),_:1}),e[5]||(e[5]=c("span",{style:{color:"white"}},"Cancel",-1))]),_:1},8,["onClick"]),a(r,{color:"blue",onClick:t.save,size:"large",variant:"flat"},{default:s(()=>[a(v,{start:"",color:"white"},{default:s(()=>[...e[6]||(e[6]=[u("mdi-content-save",-1)])]),_:1}),e[7]||(e[7]=c("span",{style:{color:"white"}},"Update/Save",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})])}const O=E(U,[["render",G],["__scopeId","data-v-925b0b99"]]);export{O as default};

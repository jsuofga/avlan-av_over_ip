import{_ as M,c as S,b as a,w as s,r as o,u as F,o as m,f as d,d as l,g,a as U,F as E,e as B,t as v}from"./index-B3QKIqvU.js";const O={name:"Favoritechannels",setup(){return{stateStore:F()}},async created(){await this.stateStore.loadUserFavChannels()},data(){return{channels:[...Array(999).keys()],selected:"",errorMessage:""}},computed:{channelOptions(){return this.channels.map(n=>n+1)},favChNames(){return this.stateStore.favChNames},favChStations(){return this.stateStore.favChStations}},methods:{add(){if(!this.selected){this.errorMessage="Please select a channel number";return}if(this.stateStore.favChStations.includes(this.selected)){this.errorMessage=`Channel ${this.selected} is already added`;return}this.errorMessage="",this.stateStore.favChNames.push(""),this.stateStore.favChStations.push(this.selected),this.selected=""},trash(n){this.stateStore.favChNames.splice(n,1),this.stateStore.favChStations.splice(n,1)},async save(){this.errorMessage="";const n=`${location.hostname}:3000`;if(this.stateStore.favChNames.includes("")){this.errorMessage="Please enter a name for all channels";return}const e=this.stateStore.favChNames.map(r=>r.toLowerCase());if(e.some((r,t)=>e.indexOf(r)!==t)){this.errorMessage="Each channel must have a unique name";return}let i={};this.stateStore.favChNames.forEach((r,t)=>{i[`fav_ch_name_${t+1}`]=this.stateStore.favChNames[t],i[`fav_ch_${t+1}`]=this.stateStore.favChStations[t]}),console.log("ir favorites",i);try{await fetch(`http://${n}/write/UserFavChannels/${JSON.stringify(i)}`),this.$router.push({name:"home"})}catch(r){console.log(r),this.errorMessage="Error saving favorite channels. Please try again."}},cancel(){this.$router.push({name:"home"})}}},z={class:"favorite-channels-container"},D={class:"field mb-4"},L={class:"text-center mt-2"},P={class:"list-grid"},j={class:"d-flex justify-space-between align-center mb-2"},A={class:"text-caption mb-2"};function q(n,e,y,i,r,t){const N=o("v-card-title"),b=o("v-select"),f=o("v-icon"),h=o("v-btn"),k=o("v-chip"),w=o("v-text-field"),u=o("v-card-text"),_=o("v-card"),V=o("v-alert"),x=o("v-card-actions");return m(),S("div",z,[a(_,{class:"favorite-channels-card",elevation:"4"},{default:s(()=>[a(N,{class:"text-h5 text-center"},{default:s(()=>[...e[1]||(e[1]=[d(" Set Favorite Channels ",-1)])]),_:1}),a(u,null,{default:s(()=>[l("div",D,[a(b,{modelValue:r.selected,"onUpdate:modelValue":e[0]||(e[0]=p=>r.selected=p),items:t.channelOptions,label:"Set Channel Number",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"]),l("div",L,[a(h,{onClick:t.add,color:"green",variant:"flat"},{default:s(()=>[a(f,{start:""},{default:s(()=>[...e[2]||(e[2]=[d("mdi-arrow-down",-1)])]),_:1}),e[3]||(e[3]=l("span",{style:{color:"white"}},"Add",-1))]),_:1},8,["onClick"])])]),l("div",P,[(m(!0),S(E,null,B(t.favChNames,(p,c)=>(m(),g(_,{key:c,class:"grid-item",elevation:"1"},{default:s(()=>[a(u,{class:"pa-2"},{default:s(()=>[l("div",j,[a(k,{size:"small",color:"primary"},{default:s(()=>[d(v(t.favChNames[c]),1)]),_:2},1024),a(h,{icon:"",size:"x-small",onClick:C=>t.trash(c),color:"red"},{default:s(()=>[a(f,{size:"small"},{default:s(()=>[...e[4]||(e[4]=[d("mdi-delete-forever",-1)])]),_:1})]),_:1},8,["onClick"])]),l("p",A,"Channel-"+v(t.favChStations[c]),1),a(w,{modelValue:t.favChNames[c],"onUpdate:modelValue":C=>t.favChNames[c]=C,variant:"outlined",density:"compact",placeholder:"Enter Station Name",maxlength:"10","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),r.errorMessage?(m(),g(V,{key:0,type:"error",density:"compact",class:"mt-4"},{default:s(()=>[d(v(r.errorMessage),1)]),_:1})):U("",!0)]),_:1}),a(x,{class:"justify-center pb-4"},{default:s(()=>[a(h,{color:"red",onClick:t.cancel,variant:"flat",class:"mx-2"},{default:s(()=>[...e[5]||(e[5]=[l("span",{style:{color:"white"}},"Cancel",-1)])]),_:1},8,["onClick"]),a(h,{color:"blue",onClick:t.save,variant:"flat",class:"mx-2"},{default:s(()=>[...e[6]||(e[6]=[l("span",{style:{color:"white"}},"Update/Save",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])}const J=M(O,[["render",q],["__scopeId","data-v-8b9f8a0c"]]);export{J as default};

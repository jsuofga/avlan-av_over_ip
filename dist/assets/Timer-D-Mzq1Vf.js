import{_ as w,c as p,d as m,b as e,t as h,w as o,r as i,F as y,u as V,o as v,f as d,a as O,m as N}from"./index-B3QKIqvU.js";const P={name:"Timer",setup(){return{stateStore:V()}},created(){},data(){return{onTime:"",offTime:"",dialog:!1}},methods:{closeCard(){this.$router.push({name:"home"})},clearTimer(){this.onTime="",this.offTime="",this.save()},save(r){const t=u=>{if(!u)return"";const[l,_]=u.split(" ");let[g,T]=l.split(":"),a=parseInt(g,10);_==="PM"&&a!==12?a+=12:_==="AM"&&a===12&&(a=0);const x=a.toString().padStart(2,"0"),b=T.padStart(2,"0");return`${x}:${b}`},k=t(this.onTime),f=t(this.offTime),n=location.hostname,c={model:this.stateStore.status.model,ip:this.stateStore.status.SwitchIPAddress,TXports:this.stateStore.status.txCount,RXports:this.stateStore.status.rxCount,onTime:k,offTime:f};fetch(`http://${n}:3000/write/UserSwitchConfig/${JSON.stringify(c)}`).then(()=>{fetch(`http://${n}:1880/timer/poe`),this.offTime==""?(this.snackbarText="Cleared Timer",this.snackbarColor="blue"):(this.snackbarText=`Saved PoE Off time to ${this.offTime}`,this.snackbarColor="blue"),this.snackbar=!0,setTimeout(()=>{this.$router.push({name:"home"})},5e3)}).catch(u=>console.error("Error saving switch config:",u))}}},E={class:"container"},U={class:"white-text"},j={class:"card-container"},B={key:0,class:"text-center"},I={key:1,class:"text-center"},$={key:2,class:"text-center blue--text"},z={class:"d-flex flex-column align-center justify-center mt-4",style:{"align-items":"center"}},A={style:{width:"350px",margin:"0 auto","text-align":"center"}},F={key:0,style:{"margin-left":"10px","font-weight":"bold",color:"#1976d2"}};function M(r,t,k,f,n,c){const u=i("v-icon"),l=i("v-btn"),_=i("v-card-title"),g=i("v-time-picker"),T=i("v-card-text"),a=i("v-spacer"),x=i("v-card-actions"),b=i("v-card"),S=i("v-dialog"),C=i("v-snackbar");return v(),p(y,null,[m("div",E,[m("h4",U,"Current Time is "+h(f.stateStore.status.serverTime),1),m("div",j,[e(b,{class:"mx-auto timer-card","max-width":"900",style:{position:"relative",height:"50%"}},{default:o(()=>[e(l,{icon:"",onClick:t[0]||(t[0]=s=>c.closeCard()),size:"small",style:{position:"absolute",top:"0px",right:"px","z-index":"2"}},{default:o(()=>[e(u,null,{default:o(()=>[...t[9]||(t[9]=[d("mdi-close",-1)])]),_:1})]),_:1}),e(_,{class:"d-flex justify-center"},{default:o(()=>[...t[10]||(t[10]=[m("span",null,"PoE Off Time",-1)])]),_:1}),e(T,null,{default:o(()=>[m("div",null,[f.stateStore.status.offtime==null?(v(),p("div",B,"Not Scheduled")):f.stateStore.status.offtime===""?(v(),p("div",I,"Not Scheduled")):(v(),p("div",$,"Off Time: "+h(f.stateStore.status.offtime),1))]),m("div",z,[m("div",A,[e(l,{color:"blue",onClick:t[1]||(t[1]=s=>n.dialog=!0),style:{"margin-bottom":"8px",color:"#fff"}},{default:o(()=>[...t[11]||(t[11]=[d(" Set PoE Off Time ",-1)])]),_:1}),n.offTime?(v(),p("span",F,h(n.offTime),1)):O("",!0),e(S,{modelValue:n.dialog,"onUpdate:modelValue":t[4]||(t[4]=s=>n.dialog=s),"max-width":"350"},{default:o(()=>[e(b,null,{default:o(()=>[e(T,null,{default:o(()=>[e(g,{modelValue:n.offTime,"onUpdate:modelValue":t[2]||(t[2]=s=>n.offTime=s),format:"ampm",color:"blue",class:"compact-time-picker",scrollable:""},null,8,["modelValue"])]),_:1}),e(x,null,{default:o(()=>[e(a),e(l,{color:"primary",text:"",onClick:t[3]||(t[3]=s=>n.dialog=!1)},{default:o(()=>[...t[12]||(t[12]=[d("OK",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),e(x,{class:"d-flex justify-space-between",style:{position:"absolute",bottom:"0",left:"0",width:"100%"}},{default:o(()=>[e(l,{onClick:t[5]||(t[5]=s=>c.clearTimer()),class:"bg-red text-white"},{default:o(()=>[...t[13]||(t[13]=[d("Clear Time",-1)])]),_:1}),e(l,{onClick:t[6]||(t[6]=s=>c.save()),class:"bg-blue text-white"},{default:o(()=>[...t[14]||(t[14]=[d("Save Time",-1)])]),_:1})]),_:1})]),_:1})])]),e(C,{modelValue:r.snackbar,"onUpdate:modelValue":t[8]||(t[8]=s=>r.snackbar=s),color:r.snackbarColor,timeout:"4000",top:""},{action:o(({attrs:s})=>[e(l,N({text:""},s,{onClick:t[7]||(t[7]=R=>r.snackbar=!1),class:"text-white"}),{default:o(()=>[...t[15]||(t[15]=[d("Close",-1)])]),_:1},16)]),default:o(()=>[d(h(r.snackbarText)+" ",1)]),_:1},8,["modelValue","color"])],64)}const D=w(P,[["render",M],["__scopeId","data-v-1304a44a"]]);export{D as default};

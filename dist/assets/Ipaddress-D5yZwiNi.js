import{_ as k,c as n,b as s,w as a,r,u as w,o as d,f as x,a as f,d as i,t as p}from"./index-I83tZY5t.js";const S={name:"Ipaddress",setup(){return{stateStore:w()}},async created(){await this.stateStore.get_UserSwitchConfig()},data(){return{feedbackMessage:null}},computed:{ipAddress:{get(){return this.stateStore.switch_ipAddress},set(t){this.stateStore.switch_ipAddress=t}}},methods:{clearFeedback(){this.feedbackMessage=null},cancel(){this.$router.push({name:"home"})},isValidIP(t){return/^(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)){3}$/.test(t)},async connect(){if(this.feedbackMessage=null,!this.ipAddress){this.feedbackMessage="Please enter an IP address for the Cisco Switch";return}if(!this.isValidIP(this.ipAddress)){this.feedbackMessage="Invalid IP address format. Please use format like 192.168.1.128";return}const t=location.hostname;try{const e={ip:this.ipAddress};await fetch(`http://${t}:3000/write/UserSwitchConfig/${JSON.stringify(e)}`),this.feedbackMessage="Switch configuration saved successfully!",setTimeout(()=>{this.$router.push({name:"dashboard"})},1e3)}catch(e){console.error("Error saving switch config:",e),this.feedbackMessage="Error saving switch configuration. Please try again."}}}},C={class:"ipaddress container"},I={key:0,class:"text-center mb-2"},y={key:1,class:"feedback text-center"};function A(t,e,M,l,c,o){const _=r("v-card-title"),h=r("v-text-field"),m=r("v-card-text"),u=r("v-btn"),v=r("v-card-actions"),g=r("v-card");return d(),n("div",C,[s(g,{class:"ip-card",elevation:"4"},{default:a(()=>[s(_,{class:"text-h6 text-center"},{default:a(()=>[...e[1]||(e[1]=[x(" Cisco Switch IP Address ",-1)])]),_:1}),s(m,null,{default:a(()=>[l.stateStore.status.model?(d(),n("h6",I,p(l.stateStore.status.model),1)):f("",!0),e[2]||(e[2]=i("h6",{class:"red-text text-center mb-4"},"Re-power Cisco Switch before proceeding!",-1)),s(h,{id:"ipAddress",modelValue:o.ipAddress,"onUpdate:modelValue":e[0]||(e[0]=b=>o.ipAddress=b),modelModifiers:{trim:!0},label:"IP Address",placeholder:"192.168.1.128",variant:"outlined",onInput:o.clearFeedback,error:!!c.feedbackMessage},null,8,["modelValue","onInput","error"]),c.feedbackMessage?(d(),n("p",y,p(c.feedbackMessage),1)):f("",!0)]),_:1}),s(v,{class:"justify-center pb-4"},{default:a(()=>[s(u,{color:"red",onClick:o.cancel,variant:"flat",class:"mx-2"},{default:a(()=>[...e[3]||(e[3]=[i("span",{style:{color:"white"}},"Cancel",-1)])]),_:1},8,["onClick"]),s(u,{color:"blue",onClick:o.connect,variant:"flat",class:"mx-2"},{default:a(()=>[...e[4]||(e[4]=[i("span",{style:{color:"white"}},"Connect",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})])}const V=k(S,[["render",A],["__scopeId","data-v-1a717e72"]]);export{V as default};
